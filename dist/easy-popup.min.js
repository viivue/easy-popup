/**!
 * Easy Popup v0.1.0
 * @author phucbm
 * @homepage https://github.com/viivue/easy-popup
 * @license MIT 2023
 */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var s=e();for(var i in s)("object"==typeof exports?exports:t)[i]=s[i]}}(this,(()=>(()=>{"use strict";var t={r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function s(t,e){e||(e=t.options||t.config||{});const s=["autoShow"],i=t.el;let o=i.getAttribute(t.attributes.init),n={};if(!o||!function(t){try{return JSON.parse(t)&&!!t}catch(t){return!1}}(o))n={...e},n.id=o||"";else{n=JSON.parse(o);for(const[t,e]of Object.entries(n))"false"===e?n[t]=!1:"true"===e?n[t]=!0:s.includes(t)&&"string"==typeof e&&e.length>0?n[t]=parseFloat(e):n[t]=e}const a=n.id||i.id||e.id;return t.id=a,n.id=a,n={...e,...n},n}t.r(e);const i=class{constructor(t){const e=t.options.cookie;if(!e)return null;if("undefined"==typeof Pia)return console.warn("PiaJs not found."),null;let s=t.options.cookieName;s="string"==typeof s&&s.length>0?s:t.id,this.key="easy-popup-"+s.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/đ/g,"d").replace(/Đ/g,"D").toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"),this.piaOptions={expires:e};const i=parseInt(t.options.showingTimes)??1;null===this.getVal()&&e&&this.setVal(i)}isShow(){const t=this.getVal();return"number"==typeof t&&t>0}onPopupOpen(){const t=this.getVal();"number"==typeof t&&this.updateVal(t-1)}getVal(){return Pia.get(this.key)}setVal(t){Pia.set(this.key,t,this.piaOptions)}updateVal(t){Pia.update(this.key,t)}};class o{constructor(t,e){if(!t)return void console.warn("Init popup fail due to empty input!");if(this.root=document.querySelector(":root"),this.el=t,this.selector="data-easy-popup",this.attributes={id:`${this.selector}-id`,title:`${this.selector}-title`,toggle:`${this.selector}-toggle`,mobileLayout:`${this.selector}-mobile`,theme:`${this.selector}-theme`,clickOutsideToClose:`${this.selector}-click-outside-to-close`,init:"data-easy-popup"},this.classes={master:"easy-popup-master",processed:"easy-popup-enabled",triggerEnabled:"easy-popup-trigger-enabled",content:"easy-popup-content",outer:"easy-popup",inner:"easy-popup-inner",center:"easy-popup-center",overflow:"easy-popup-overflow",container:"easy-popup-container",open:"open",closeButton:"easy-popup-close-button",mobileHeading:"easy-popup-mobile-heading",hasMobileLayout:"easy-popup-has-mobile-layout",ignoreClick:"easy-popup-ignore-click"},this.innerHTML=this.el.innerHTML,this.isOpen=!1,this.el.classList.contains(this.classes.processed))return;this.options={id:this.uniqueId("easy-popup-"),outerClass:"",title:"",closeButtonHTML:'<span><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg></span>',triggerSelector:"",hasMobileLayout:!1,theme:"default",keyboard:!0,clickOutsideToClose:!0,autoShow:!1,cookie:void 0,showingTimes:1,cookieName:"",onClose:()=>{},onOpen:()=>{},...e},this.options.title=this.el.getAttribute(this.attributes.title)||this.options.title,this.options.theme=this.el.getAttribute(this.attributes.theme)||this.options.theme,this.options.clickOutsideToClose=this.isBooleanOptionTrue(this.attributes.clickOutsideToClose,this.options.clickOutsideToClose),this.options.hasMobileLayout=this.isBooleanOptionTrue(this.attributes.mobileLayout,this.options.hasMobileLayout),this.options=s(this,this.options),this.cookie=new i(this),this.closeButtonHTML=this.options.closeButtonHTML,this.masterContainer=document.querySelector(`.${this.classes.master}`),this.generateHTML();let o=`a[href="#${this.id}"], [${this.attributes.toggle}="${this.id}"]`;if(o=this.options.triggerSelector?`${this.options.triggerSelector}, ${o}`:o,document.querySelectorAll(o).forEach((t=>{t.classList.add(this.classes.triggerEnabled),t.addEventListener("click",(t=>{t.preventDefault(),this.toggle()}))})),!1!==this.options.autoShow){if(!this.cookie||this.cookie.isShow()){const t=!0===this.options.autoShow?1e3:this.options.autoShow;setTimeout((()=>this.open()),t)}}}isBooleanOptionTrue(t,e){const s=this.el.getAttribute(t);return s?"false"!==s:e}generateHTML(){this.el.classList.contains(this.classes.processed)||(this.masterContainer||(this.masterContainer=document.createElement("div"),this.masterContainer.classList.add(this.classes.master)),document.querySelector("body").appendChild(this.masterContainer),this.masterContainer.appendChild(this.el),this.inner=this.wrap(this.el),this.inner.classList.add(this.classes.inner),this.closeButton=document.createElement("button"),this.closeButton.classList.add(this.classes.closeButton),this.closeButton.innerHTML=this.closeButtonHTML,this.closeButton.setAttribute(this.attributes.toggle,""),this.closeButton.setAttribute("aria-label",`Close popup ${this.options.title}`),this.closeButton.addEventListener("click",(()=>this.close())),this.inner.appendChild(this.closeButton),this.container=this.wrap(this.inner),this.container.classList.add(this.classes.container),this.overflow=this.wrap(this.container),this.overflow.classList.add(this.classes.overflow),this.mobileHeading=document.createElement("div"),this.mobileHeading.classList.add(this.classes.mobileHeading),this.mobileHeading.innerHTML=`<div class="easy-popup-heading-inner">\n            <div>${this.options.title}</div>\n            <button class="${this.classes.closeButton} mobile" ${this.attributes.toggle}>${this.closeButtonHTML}</button>\n            </div>`,this.overflow.appendChild(this.mobileHeading),this.outer=this.wrap(this.overflow),this.outer.classList.add(this.classes.outer),this.options.outerClass&&this.outer.classList.add(this.options.outerClass),this.options.hasMobileLayout&&this.outer.classList.add(this.classes.hasMobileLayout),this.outer.setAttribute(this.attributes.id,this.id),this.outer.setAttribute(this.attributes.theme,this.options.theme),this.outer.addEventListener("click",(t=>{t.target.classList.contains(this.classes.ignoreClick)||this.isClickOutsideContent(t)&&this.options.clickOutsideToClose&&this.close()})),this.outer.querySelectorAll("[data-easy-popup-toggle]").forEach((t=>{t.addEventListener("click",(()=>this.close()))})),this.options.keyboard&&document.addEventListener("keyup",(t=>{this.isOpen&&"Escape"===t.key&&this.close()})),this.el.classList.add(this.classes.processed,this.classes.content))}isClickOutsideContent(t){return!this.inner.contains(t.target)&&!this.mobileHeading.contains(t.target)}open(){window.EasyPopupData.active&&EasyPopup.get(window.EasyPopupData.active).close(),window.EasyPopupData.active=this.id,this.outer.classList.add(this.classes.open),this.isOpen=!0,this.root.classList.add("easy-popup-open"),this.root.style.paddingRight=`${this.getScrollbarWidth()}px`,this.root.style.overflow="hidden",this.cookie?.onPopupOpen(),"function"==typeof this.options.onOpen&&this.options.onOpen(this)}close(){window.EasyPopupData.active="",this.outer.classList.remove(this.classes.open),this.isOpen=!1,this.root.classList.remove("easy-popup-open"),setTimeout((()=>{window.EasyPopupData.active||(this.root.style.paddingRight="",this.root.style.overflow=""),"function"==typeof this.options.onClose&&this.options.onClose(this)}),300)}toggle(){this.isOpen?this.close():this.open()}wrap(t,e=document.createElement("div")){return t.parentNode.insertBefore(e,t),e.appendChild(t),e}getScrollbarWidth(){const t=document.createElement("div");t.style.visibility="hidden",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",document.body.appendChild(t);const e=document.createElement("div");t.appendChild(e);const s=t.offsetWidth-e.offsetWidth;return t.parentNode.removeChild(t),s}uniqueId(t=""){return t+(+new Date).toString(16)+(1e8*Math.random()|0).toString(16)}}return window.EasyPopupData=new class{constructor(){this.active="",this.popups=[]}add(t){this.popups.push(t)}get(t){return this.popups.filter((e=>e.id===t))[0]}},window.EasyPopup={init:(t="[data-easy-popup]",e={})=>{document.querySelectorAll(t).forEach((t=>window.EasyPopupData.add(new o(t,e))))},get:t=>window.EasyPopupData.get(t)},window.EasyPopup.init(),e})()));