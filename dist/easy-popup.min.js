/**!
 * Easy Popup v0.2.1
 * @author phucbm
 * @homepage https://github.com/viivue/easy-popup
 * @license MIT 2023
 */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var s=e();for(var i in s)("object"==typeof exports?exports:t)[i]=s[i]}}(this,(()=>(()=>{"use strict";var t={r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e);const s=class{constructor(t){const e=t.options.cookie;if(!e)return null;if("undefined"==typeof Pia)return console.warn("PiaJs not found."),null;let s=t.options.cookieName;s="string"==typeof s&&s.length>0?s:t.id,this.key="easy-popup-"+s.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/đ/g,"d").replace(/Đ/g,"D").toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"),this.piaOptions={expires:e};const i=parseInt(t.options.showingTimes)??1;null===this.getVal()&&e&&this.setVal(i)}isShow(){const t=this.getVal();return"number"==typeof t&&t>0}onPopupOpen(){const t=this.getVal();"number"==typeof t&&this.updateVal(t-1)}getVal(){return Pia.get(this.key)}setVal(t){Pia.set(this.key,t,this.piaOptions)}updateVal(t){Pia.update(this.key,t)}},i="easy-popup-master",o="easy-popup-enabled",n="easy-popup-trigger-enabled",a="easy-popup-content",r="easy-popup",p="easy-popup-inner",l="easy-popup-overflow",h="easy-popup-container",u="open",c="easy-popup-close-button",d="ep-has-custom-close-button",f="ep-mobile-heading",y="ep-has-mobile-layout",g="easy-popup-ignore-click",m="data-easy-popup-id",v="data-easy-popup-title",w="data-easy-popup-toggle",b="data-easy-popup-mobile",L="data-easy-popup-theme",C="data-easy-popup-click-outside-to-close",S="data-easy-popup",k={id:function(t=""){return t+(+new Date).toString(16)+(1e8*Math.random()|0).toString(16)}("easy-popup-"),outerClass:"",title:"",closeButtonHTML:"",triggerSelector:"",hasMobileLayout:!1,theme:"default",keyboard:!0,clickOutsideToClose:!0,autoShow:!1,cookie:void 0,showingTimes:1,cookieName:""};class O{constructor(t,e){t&&(this.context=t,this.options={names:[],...e},this.eventNames=this.options.names,this.eventsList=[])}fire(t,e={}){if(!this.eventNames.includes(t))return void console.warn(`Cannot fire unrecognized event "${t}"`,this,e);const s={instance:this.context,eventName:t,...e},i=(this.context.config?this.context.config:this.context.options)[t];"function"==typeof i&&i(s);const o=this.eventsList[t];o?.length&&o.forEach((t=>{"function"==typeof t&&t(s)}))}add(t,e){t=function(t){let e=t;"on"!==t.slice(0,2)&&(e=e.charAt(0).toUpperCase()+e.slice(1),e="on"+e);return e}(t);this.eventNames.includes(t)?(void 0===this.eventsList[t]&&(this.eventsList[t]=[]),this.eventsList[t].push(e)):console.warn(`Cannot add unrecognized event "${t}"`)}}function T({target:t,attributeName:e="",defaultOptions:s={},numericValues:i=[],onIsString:o,dev:n=!1}){if(!t)return n&&console.warn("Target not found!",t),s;if(!t.hasAttribute(e))return n&&console.warn("Attribute not found from target",e),s;const a=t.getAttribute(e);if(!a.length)return s;if(!function(t){try{return JSON.parse(t)&&!!t}catch(t){return!1}}(a))return"function"==typeof o?o(a):console.warn("Not a JSON string",a),s;let r=JSON.parse(a);for(const[t,e]of Object.entries(r))"false"===e?r[t]=!1:"true"===e?r[t]=!0:i.includes(t)&&"string"==typeof e&&e.length>0?r[t]=parseFloat(e):r[t]=e;return{...s,...r}}class E{constructor(t,e){if(!t)return void console.warn("Init popup fail due to empty input!");if(this.root=document.querySelector(":root"),this.el=t,this.selector="data-easy-popup",this.innerHTML=this.el.innerHTML,this.isOpen=!1,this.el.classList.contains(o))return;let a;this.events=new O(this,{names:["onClose","onOpen"]}),this.options={...k,id:this.el.id?this.el.id:k.id},this.options=T({target:this.el,attributeName:S,defaultOptions:k,numericValues:["autoShow","showingTimes"],onIsString:t=>{t&&(a=t)}}),a&&(this.options.id=a),this.options={...this.options,...e},this.id=this.options.id,this.options.title=this.el.getAttribute(v)||this.options.title,this.options.theme=this.el.getAttribute(L)||this.options.theme,this.options.clickOutsideToClose=this.isBooleanOptionTrue(C,this.options.clickOutsideToClose),this.options.hasMobileLayout=this.isBooleanOptionTrue(b,this.options.hasMobileLayout),this.cookie=this.options.cookie?new s(this):null,this.closeButtonHTML=this.options.closeButtonHTML?this.options.closeButtonHTML:'<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>',this.masterContainer=document.querySelector(`.${i}`),this.generateHTML();let r=`a[href="#${this.id}"], [${w}="${this.id}"]`;if(r=this.options.triggerSelector?`${this.options.triggerSelector}, ${r}`:r,document.querySelectorAll(r).forEach((t=>{t.classList.add(n),t.addEventListener("click",(t=>{t.preventDefault(),this.toggle()}))})),!1!==this.options.autoShow){if(!this.cookie||this.cookie.isShow()){const t=!0===this.options.autoShow?1e3:this.options.autoShow;setTimeout((()=>this.open()),t)}}}on(t,e){this.events.add(t,e)}isBooleanOptionTrue(t,e){const s=this.el.getAttribute(t);return s?"false"!==s:e}generateHTML(){this.el.classList.contains(o)||(this.masterContainer||(this.masterContainer=document.createElement("div"),this.masterContainer.classList.add(i)),document.querySelector("body").appendChild(this.masterContainer),this.masterContainer.appendChild(this.el),this.inner=this.wrap(this.el),this.inner.classList.add(p),this.closeButton=document.createElement("button"),this.closeButton.classList.add(c),this.closeButton.innerHTML=this.closeButtonHTML,this.closeButton.setAttribute(w,""),this.closeButton.setAttribute("aria-label",`Close popup ${this.options.title}`),this.closeButton.addEventListener("click",(()=>this.close())),this.inner.appendChild(this.closeButton),this.container=this.wrap(this.inner),this.container.classList.add(h),this.overflow=this.wrap(this.container),this.overflow.classList.add(l),this.mobileHeading=document.createElement("div"),this.mobileHeading.classList.add(f),this.mobileHeading.innerHTML=`<div class="easy-popup-heading-inner">\n            <div>${this.options.title}</div>\n            <button class="${c} mobile" ${w}>${this.closeButtonHTML}</button>\n            </div>`,this.overflow.appendChild(this.mobileHeading),this.outer=this.wrap(this.overflow),this.outer.classList.add(r),this.options.outerClass&&this.outer.classList.add(this.options.outerClass),this.options.hasMobileLayout&&this.outer.classList.add(y),this.options.closeButtonHTML&&this.outer.classList.add(d),this.outer.setAttribute(m,this.id),this.outer.setAttribute(L,this.options.theme),this.outer.addEventListener("click",(t=>{t.target.classList.contains(g)||this.isClickOutsideContent(t)&&this.options.clickOutsideToClose&&this.close()})),this.outer.querySelectorAll("[data-easy-popup-toggle]").forEach((t=>{t.addEventListener("click",(()=>this.close()))})),this.options.keyboard&&document.addEventListener("keyup",(t=>{this.isOpen&&"Escape"===t.key&&this.close()})),this.el.classList.add(o,a))}isClickOutsideContent(t){return!this.inner.contains(t.target)&&!this.mobileHeading.contains(t.target)}open(){window.EasyPopupData.active&&EasyPopup.get(window.EasyPopupData.active).close(),window.EasyPopupData.active=this.id,this.outer.classList.add(u),this.isOpen=!0,this.root.classList.add("easy-popup-open"),this.root.style.paddingRight=`${this.getScrollbarWidth()}px`,this.root.style.overflow="hidden",this.cookie?.onPopupOpen(),this.events.fire("onOpen")}close(){window.EasyPopupData.active="",this.outer.classList.remove(u),this.isOpen=!1,this.root.classList.remove("easy-popup-open"),setTimeout((()=>{window.EasyPopupData.active||(this.root.style.paddingRight="",this.root.style.overflow=""),this.events.fire("onClose")}),300)}toggle(){this.isOpen?this.close():this.open()}wrap(t,e=document.createElement("div")){return t.parentNode.insertBefore(e,t),e.appendChild(t),e}getScrollbarWidth(){const t=document.createElement("div");t.style.visibility="hidden",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",document.body.appendChild(t);const e=document.createElement("div");t.appendChild(e);const s=t.offsetWidth-e.offsetWidth;return t.parentNode.removeChild(t),s}}return window.EasyPopupData=new class{constructor(){this.active="",this.popups=[]}add(t){this.popups.push(t)}get(t){return this.popups.filter((e=>e.id===t))[0]}},window.EasyPopup={init:(t=`[${S}]`,e={})=>{document.querySelectorAll(t).forEach((t=>window.EasyPopupData.add(new E(t,e))))},get:t=>window.EasyPopupData.get(t)},window.EasyPopup.init(),e})()));